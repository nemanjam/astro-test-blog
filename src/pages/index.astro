---
export const prerender = true;
import { getCollection } from 'astro:content';
import { Image } from '@unpic/astro';
import '../../styles/global.css';
import Layout from '../layouts/Layout.astro';
import { calculateBlurhashGradient } from '../utils/calculate-blurhash-gradient';
const [blurhashGradient, blogs] = await Promise.all([
  calculateBlurhashGradient(
    'https://res.cloudinary.com/dzrea5zhv/image/upload/v1583171588/me_qvrwky.jpg'
  ),
  getCollection('blog'),
]);
const latestBlog = blogs.sort(
  (a, b) => +new Date(b.data.date) - +new Date(a.data.date)
)[0];
---

<Layout
  description="Thomas Ledoux' personal website. Writes about Javascript/React/Next.js/Remix/Astro. Always looking to learn about the newest frameworks and features."
  title="Thomas Ledoux - Home"
>
  <section class="relative lg:pt-0 items-center flex flex-wrap h-full my-auto">
    <div
      class="gap-8 w-full flex flex-col lg:flex-row items-center justify-between h-full"
    >
      <h1
        class="text-4xl flex-grow font-bold md:text-7xl md:leading-[1.1] flex flex-col items-center md:items-start"
      >
        <span>Thomas is a</span>
        <a class="title-part" href="/portfolio"> developer</a>
        <a class="title-part whitespace-nowrap" href="/personal">
          badminton player</a
        >
        <a class="title-part" href="/personal"> travel lover</a>
      </h1>
      <div class="w-3/4 mx-auto lg:ml-auto lg:mr-0">
        <Image
          class="rounded-full mx-auto md:ml-auto lg:mr-0"
          alt="Profile"
          src="https://res.cloudinary.com/dzrea5zhv/image/upload/v1583171588/me_qvrwky.jpg"
          width={320}
          height={320}
          layout="constrained"
          background={blurhashGradient}
          priority
          sizes="(max-width: 767px) 75vw, 45vw"
        />
      </div>
      <div class="lg:fixed flex lg:left-1/2 lg:-translate-x-1/2 lg:bottom-20">
        <a
          href={`/blog/${latestBlog?.slug}`}
          class="cursor-pointer bg-secondary text-white px-8 py-4 border-l-8 border-l-primary transition-transform hover:scale-[1.02]"
        >
          <h2 class="text-lg font-bold">Latest blog post</h2>
          {latestBlog?.data.title}
        </a>
      </div>
    </div>
  </section>
</Layout>
